"use strict";var MusicPlayer=React.createClass({displayName:"MusicPlayer",getInitialState:function(){return{musicPlayer:""}},stop:function(){log("Musicplayer: stopping"),this.state.musicPlayer.stop().then(function(a){log("Musicplayer: stopped "+a),this.props.onStop(a)}.bind(this))},load:function(){log("Musicplayer: loading"),this.state.musicPlayer.load().then(function(){log("Musicplayer: loaded"),this.props.onMusicLoaded()}.bind(this))},play:function(){log("Musicplayer: play");var a=this.refs.points.getDOMNode();this.state.musicPlayer.play().then(function(a){log("Musicplayer: ended "+a),this.props.onStop(a)}.bind(this),function(){console.error("Musicplayer: play()")},function(b){log("Musicplayer: update time "+b),a.innerHTML=b})},componentDidMount:function(){log("Musicplayer: componentDidMount"),this.state.musicPlayer||this.props.musicLoaded||this.props.musicPlaying||this.setState({musicPlayer:new MusicPlayerService(this.refs.audio.getDOMNode())})},componentWillUnmount:function(){log("Musicplayer: componentWillUnmount"),this.state.musicPlayer.stop()},componentDidUpdate:function(){log("Musicplayer: componentDidUpdate"),this.state.musicPlayer||this.props.musicLoaded||this.props.musicPlaying?this.state.musicPlayer&&this.props.musicLoaded&&!this.props.musicPlaying?this.stop():!this.state.musicPlayer||this.props.musicLoaded||this.props.musicPlaying?this.state.musicPlayer&&this.props.musicLoaded&&this.props.musicPlaying&&this.play():this.load():(this.refs.points.getDOMNode().innerHTML="",this.setState({musicPlayer:new MusicPlayerService(this.refs.audio.getDOMNode())}))},componentWillReceiveProps:function(a){log("Musicplayer: componentWillReceiveProps"),this.props&&a&&this.props.url!==a.url&&(log("Musicplayer: reset musicPlayer"),this.setState({musicPlayer:""}))},render:function(){log("Musicplayer: render");var a="";if(!this.state.musicPlayer&&!this.props.musicLoaded&&!this.props.musicPlaying){log("Musicplayer: render new player: "+this.props.url);var a=React.DOM.audio({src:this.props.url,ref:"audio",type:"audio/mpeg",preload:"auto"})}return React.DOM.div({className:"m-music-player"},React.DOM.p({ref:"points"}),a)}});